{% extends "base.html" %}

{% block title %}Quark SEO - Analyzing Your Websit{% endblock %}
{% block content %}

<style>
    .loader {
        border: 16px solid #f3f3f3;
        border-radius: 50%;
        border-top: 16px solid #0d42ff;
        width: 120px;
        height: 120px;
        animation: spin 2s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>

<div class="page-title dark-background" data-aos="fade" style="background-image: url(../static/assets/img/page-title-bg.jpg);">
    <div class="container position-relative">
      <h1>Einen Augenblick ...</h1>
      <p>Bitte warten sie einen Moment, w√§hrend wir ihre Webseite analysieren.</p>
    </div>
</div><!-- End Page Title -->

<section>

    <div class="container">
  
      <div class="row g-0" data-aos="fade-up" data-aos-delay="100">
  
        <div data-aos="fade-up" data-aos-delay="200" style="height: 40vh; align-items: center; display: flex; justify-content: center;">
            <div class="loader"></div>
        </div><!-- End Quote Form -->
  
      </div>
  
    </div>
  
  </section>

<script>
    const url = document.location.href.split('/seo/analyze/')[1];
    fetch(`/api/analyze/${url}`, { 
        method: 'GET',
        headers: {
            'Accept': 'application/json'
        }
    })
    .then(response => {
        if (response.status === 200) {
            return response.json().then(data => {
                window.location.href = `/results/${url}/${data.uuid}`; 
            });
        } else {
            window.location.href = `/results/${url}/error`;
        }
    })
    .catch(error => {
        window.location.href = `/results/${url}/error`;
    });
</script>

{% endblock %}